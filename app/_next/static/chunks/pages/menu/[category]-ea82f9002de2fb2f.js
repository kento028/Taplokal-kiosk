(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[890],{1034:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/menu/[category]",function(){return s(9254)}])},9254:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var a=s(4246),r=s(156),i=s(2696),c=s(6677),l=s(7378),n=s(8579),d=s.n(n),o=s(5332),u=e=>{let{item:t}=e,{id:s,stock:c,name:l,price:n,imageURL:u}=t,m=async()=>{try{let e=r.I8.currentUser.uid,t=(0,i.hJ)(r.fs,"carts"),a=(0,i.IO)(t,(0,i.ar)("customerId","==",e),(0,i.ar)("status","==","cart")),c=await (0,i.PL)(a);if(c.empty){let a=(0,i.JU)(t);await (0,i.pl)(a,{cartId:a.id,customerId:e,status:"cart",items:[{menuItemId:s,name:l,quantity:1,price:n,imageURL:u}]})}else{let e=c.docs[0],t=e.data(),a=t.items.findIndex(e=>e.menuItemId===s);if(a>=0){let s=t.items.map((e,t)=>t===a?{...e,quantity:e.quantity+1}:e);await (0,i.r7)(e.ref,{items:s})}else await (0,i.r7)(e.ref,{items:[...t.items,{menuItemId:s,name:l,quantity:1,price:n,imageURL:u}]})}o.ZP.success("Item added: "+l)}catch(e){o.ZP.error("Error adding item to cart: "+e)}};return(0,a.jsxs)("div",{className:"w-full bg-background hover:bg-foreground/20 border rounded-lg shadow-md overflow-hidden relative pb-16",children:[(0,a.jsxs)("div",{className:"relative w-full h-0 pb-[100%]",children:[0===c&&(0,a.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-black text-white bg-opacity-50 z-50 flex justify-center items-center",children:"Out of Stock"}),(0,a.jsx)(d(),{className:"w-full h-64 object-cover",src:u,alt:"logo",width:300,height:300})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h2",{className:"text-xl font-medium capitalize mb-2",children:l}),(0,a.jsxs)("div",{className:"flex justify-between items-center absolute bottom-0 left-0 w-full px-4 py-3 bg-white bg-opacity-90",children:[(0,a.jsxs)("h1",{className:"text-lg font-semibold",children:["â‚±",n,".00"]}),(0,a.jsx)("button",{disabled:0==c,onClick:m,className:"py-2 px-6 bg-foreground hover:bg-primary/90 rounded-lg text-sm font-medium text-background border",children:"Add to Cart"})]})]})]},s)},m=()=>{let e=(0,c.useRouter)().query.category,[t,s]=(0,l.useState)([]);return(0,l.useEffect)(()=>{let t=e=>e.replace(/-/g," ");(async()=>{let a=t(e);console.log(a);let c=(0,i.hJ)(r.fs,"menu");s((await (0,i.PL)((0,i.IO)(c,(0,i.ar)("category","==",a),(0,i.Xo)("sold","desc")))).docs.map(e=>{let t=e.data();return{id:e.id,sold:t.sold,stock:t.stock,name:t.name,description:t.description,imageURL:t.imageURL,price:t.price}}))})()},[e]),(0,a.jsx)("div",{className:"py-5 mx-auto container px-20",children:(0,a.jsx)("div",{className:"grid lg:grid-cols-4 gap-5 mt-5 px-6 lg:px-0",children:t.map((e,t)=>(0,a.jsx)(u,{item:e},t))})})}},6677:function(e,t,s){e.exports=s(8739)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=1034)}),_N_E=e.O()}]);